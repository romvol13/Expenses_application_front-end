<header>
    <app-navbar></app-navbar>
</header>

<main>
    <div class="container">
        <div id="data-table" class="data-table">
            <table id="expensesTable" class="table table-striped" style="width:100%">
                <thead id="tableContent">
                    <tr>
                        <th class="sortable-header" (click)="sortTable('price')">
                            Price, €
                            <span *ngIf="sortedColumn === 'price'"
                                [ngClass]="{'custom-sort-up-icon': isAscending, 'custom-sort-down-icon': !isAscending}"></span>
                        </th>
                        <th class="sortable-header" (click)="sortTable('category')">
                            Category
                            <span *ngIf="sortedColumn === 'category'"
                                [ngClass]="{'custom-sort-up-icon': isAscending, 'custom-sort-down-icon': !isAscending}"></span>
                        </th>
                        <th class="sortable-header d-none d-sm-table-cell">Description</th>
                        <th class="sortable-header d-none d-sm-table-cell" (click)="sortTable('date')">
                            Date
                            <span *ngIf="sortedColumn === 'date'"
                                [ngClass]="{'custom-sort-up-icon': isAscending, 'custom-sort-down-icon': !isAscending}"></span>
                        </th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <tr *ngFor="let expense of getPaginatedExpenses()">
                        <td>{{ expense.price | number:'1.2-2' }}€</td>
                        <td>{{ expense.category }}</td>
                        <td class="d-none d-sm-table-cell">{{ expense.description }}</td>
                        <td class="d-none d-sm-table-cell">{{ expense.date | date:'yyyy-MM-dd' }}</td>
                        <td>
                            <button class="btn btn-primary" (click)="editExpense(expense)">Edit</button>
                            <button class="btn btn-danger" (click)="deleteExpense(expense.id)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Pagination controls -->
            <nav *ngIf="expenses.length > itemsPerPage">
                <ul class="pagination">
                    <li class="page-item" [class.disabled]="currentPage === 1">
                        <button class="page-link" (click)="onPageChange(currentPage - 1)"
                            [disabled]="currentPage === 1">Previous</button>
                    </li>
                    <li class="page-item" *ngFor="let page of getPageNumbers()">
                        <button class="page-link" (click)="onPageChange(page)"
                            [class.active-page]="currentPage === page">{{ page }}</button>
                    </li>
                    <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                        <button class="page-link" (click)="onPageChange(currentPage + 1)"
                            [disabled]="currentPage === getTotalPages()">Next</button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</main>

<footer>
    <app-footer></app-footer>
</footer>